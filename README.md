<!-- vale off -->
<!-- markdownlint-disable -->
<p align="center">
  <img src="docs/content/assets/img/aperture_logo.png" alt="FluxNinja Aperture" width="75%">
  <br/>
  <a href="https://docs.fluxninja.com">
    <img alt="Documentation Reference" src="https://img.shields.io/badge/documentation-reference-brightgreen?style=for-the-badge&logo=data:image/png;base64,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">
  </a>
  <a href="https://join.slack.com/t/fluxninja-aperture/shared_invite/zt-1eunlrkhh-10P1HUkmBfVJX3qrSLRk~g">
    <img alt="Slack Community" src="https://img.shields.io/badge/Join%20Our%20Community-Slack-brightgreen?style=for-the-badge&logo=slack">
  </a>
  <a href="https://dl.circleci.com/status-badge/img/gh/fluxninja/aperture/tree/main.svg?style=svg">
    <img alt="Build Status" src="https://img.shields.io/circleci/build/github/fluxninja/aperture/main?style=for-the-badge&logo=circleci">
  </a>
  <a href="https://goreportcard.com/report/github.com/fluxninja/aperture">
    <img alt="Go Report Card" src="https://goreportcard.com/badge/github.com/fluxninja/aperture?style=for-the-badge">
  </a>
  <a href="https://codecov.io/gh/fluxninja/aperture/branch/main/">
    <img alt="Codecov Status" src="https://img.shields.io/codecov/c/github/fluxninja/aperture?style=for-the-badge&logo=codecov">
  </a>
  <a href="https://pkg.go.dev/github.com/fluxninja/aperture">
    <img alt="Godoc Reference" src="https://img.shields.io/badge/godoc-reference-brightgreen?style=for-the-badge&logo=go&logoColor=white">
  </a>
</p>
<!-- markdownlint-enable -->
<!-- vale on -->

# ü•∑ FluxNinja Aperture

Aperture is an observability-driven load management platform designed for
classifying, scheduling, and rate-limiting API traffic in cloud applications.
Built upon a foundation of observability and a global control plane, it offers a
comprehensive suite of load management capabilities that enhance the reliability
and performance of cloud applications while also optimizing resource
utilization.

Aperture seamlessly integrates with existing control points such as gateways,
service meshes, and application middlewares. Moreover, it offers SDKs for
developers to establish control points around specific features or code sections
inside applications

## ‚öôÔ∏è Features

Aperture provides a variety of advanced load management features:

- **Adaptive service protection:** Enhance resource utilization and safeguard
  against abrupt service overloads with an intelligent queue at the entry point
  of services. This queue dynamically adjusts the rate of requests based on live
  service health, thereby mitigating potential service disruptions and ensuring
  optimal performance under all load conditions.
- **Global quota management:** Maintain compliance with external API quotas with
  a global token bucket and smart request queuing. This feature regulates
  requests aimed at external services, ensuring that the usage remains within
  prescribed rate limits and avoids penalties or additional costs.
- **Workload prioritization:** Safeguard crucial user experience pathways and
  ensure prioritized access to external APIs even during high-load conditions by
  strategically prioritizing workloads. This is achieved through the use of
  declarative policies that label and prioritize workload requests, such as API
  calls. By employing
  [weighted fair queuing](https://en.wikipedia.org/wiki/Weighted_fair_queueing)
  for scheduling, Aperture ensures a fair distribution of resources that aligns
  with the business value and urgency of requests.
- **Load-based auto-scaling:** Eliminate the need for costly over-provisioning
  and enhance efficiency with Aperture's load-based auto-scaling. Aperture's
  policies are expressed as circuit graphs that continuously track deviations
  from service-level objectives and calculate recovery or escalation actions.
  Auto-scaling can be implemented as an escalation that triggers based on load
  throttling signal.
- **Distributed rate-limiting:** Safeguard APIs from potential abuse with
  Aperture's high-performance, distributed rate limiter. This feature enforces
  per-key limits based on fine-grained labels, ensuring precise control and
  prevention of excessive usage.
- **Percentage rollouts:** Enable teams to gradually release new features to a
  subset of users, without impacting the rest of the system. Aperture provides
  automated load ramping functionality, allowing for a safe and controlled
  increment of load to new features or API endpoints. This feature continuously
  monitors for potential performance issues and includes an automatic response
  mechanism to dial back load in case of a performance regression. This
  proactive approach minimizes service disruptions and maintains consistent
  performance, even when rolling out new features.

## üèóÔ∏è Architecture

![Aperture Architecture Overview](./docs/content/assets/diagrams/architecture/architecture_simple.mmd.svg)

- üö¶ Aperture Agents are typically deployed next to the services and provide
  high-performance load management capabilities. They are responsible for
  scheduling and rate-limiting incoming requests based on the policies defined
  in the Aperture Controller. In addition, they also collect service health and
  flow metrics.

- ü§ñ Aperture Controller executes observability-driven control policies and
  configures Aperture Agents. The control policies are expressed as circuit
  graphs consisting of interconnected signal processing blocks. The Aperture
  policies provide a programmable way to tailor sophisticated control policies
  to match any application's needs.

## üèÅ Getting Started

### üéÆ Playground

To try Aperture in a local Kubernetes environment, refer to
[Playground docs](./playground/README.md).

![Service Protection Policy Dashboard](./docs/content/assets/img/grafana_dashboard.png)

### üèéÔ∏è Installation

To install the Aperture system, please follow the
[Installation](https://docs.fluxninja.com/get-started/installation) guide.

### üìñ Use Cases

- [Use Cases](https://docs.fluxninja.com/use-cases) section in Aperture
  documentation.

### üñ•Ô∏è Slide Decks

- [Observability-driven Load Management](https://docs.google.com/presentation/d/1Funig5u63w96G91ZjHV7ftgLOl1c5z5yDeuoVRH1QSs/edit?usp=sharing)
  deck covers the overview and use-cases of Aperture.

## üé• Videos

- [SREcon 23 APAC - Mastering Chaos: Achieving Fault Tolerance with Observability-Driven Prioritized Load Shedding](https://www.youtube.com/watch?v=ws9__JjaJsE)
- [Chaos Carnival 2023-Graceful Degradation:Keeping The Lights On When Everything Goes Wrong](https://www.youtube.com/watch?v=yHKPXsZOc5I)
- [Graceful Degradation: When All Goes Wrong | Tanveer Gill | Conf42 Chaos Engineering 2023](https://www.youtube.com/watch?v=nm62d2gYqNk)
- [How Concurrency Limits Help Protect Against Cascading Failures](https://youtu.be/m070bAvrDHM)
- [Build Indestructible Applications with Aperture Flow Control](https://www.youtube.com/watch?v=sEl4SMo3KNo)

## üë∑ Contributing

[Reporting bugs](https://github.com/fluxninja/aperture/issues/new?assignees=&labels=bug&template=bug_report.md&title=)
helps us improve Aperture to be more reliable and user-friendly. Please make
sure to include all the required information to reproduce and understand the bug
you are reporting. Follow helper questions in the bug report template to make it
easier. If you see a way to improve Aperture, use the
[feature request](https://github.com/fluxninja/aperture/issues/new?assignees=&labels=feature+request&template=feature_request.md&title=)
template to create an issue.

To contribute code, please read the [Contribution guide](CONTRIBUTING.md).
