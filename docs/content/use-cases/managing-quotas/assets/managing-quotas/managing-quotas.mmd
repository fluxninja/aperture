flowchart LR
classDef TokenBucket fill:#F8773D,stroke:#000000,stroke-width:2px;
classDef Signal fill:#EFEEED,stroke:#000000,stroke-width:1px;
classDef Service fill:#56AE89,stroke:#000000,stroke-width:2px;
classDef HP fill:#add8e6,stroke:#000000,stroke-width:1px;
classDef LP fill:#ffb6c1,stroke:#000000,stroke-width:1px;

BC("Bucket Capacity") --> TB
RS("Fill Amount") --> TB

TB[\Token Bucket/]
class TB TokenBucket

TB <-- "Counting" --> Agents

subgraph " "
Service -- "req/s" --> Agents
class Service Service
  subgraph "Agents"
    subgraph "Scheduler"
      HP("High Priority - 200")
      class HP HP
      LP("Low Priority - 50")
      class LP LP
    end
    class Scheduler Service
  end
  class Agents MainClass
  HP --> API
  LP --> API
  class API Service
end
