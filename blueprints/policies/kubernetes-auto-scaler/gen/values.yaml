# Generated values file for policies/kubernetes-auto-scaler blueprint
# Documentation/Reference for objects and parameters can be found at:
# https://docs.fluxninja.com/reference/policies/bundled-blueprints/policies/kubernetes-auto-scaler

common:
  # Name of the policy.
  # Type: string
  # Required: True
  policy_name: __REQUIRED_FIELD__

policy:
  # Minimum number of replicas.
  # Type: string
  min_replicas: "1"
  # Maximum number of replicas.
  # Type: string
  max_replicas: "10"
  # The amount of time to wait after a scale-in operation for another scale-in operation.
  # Type: string
  scale_in_cooldown: "40s"
  # The amount of time to wait after a scale-out operation for another scale-out or scale-in operation.
  # Type: string
  scale_out_cooldown: "30s"
  # Cooldown override percentage defines a threshold change in scale-out beyond which previous cooldown is overridden.
  # Type: number
  cooldown_override_percentage: 50
  # The maximum decrease of replicas (e.g. pods) at one time.
  # Type: number
  max_scale_in_percentage: 1
  # The maximum increase of replicas (e.g. pods) at one time.
  # Type: number
  max_scale_out_percentage: 10
  # Configuration for scale-in alerter.
  # Type: aperture.spec.v1.AlerterParameters
  scale_in_alerter_parameters:
    # Name of the alert.
    # Type: string
    alert_name: "Kubernetes Auto Scaler Scale In Event"
  # Cooldown override percentage.
  # Type: aperture.spec.v1.AlerterParameters
  scale_out_alerter_parameters:
    # Configuration for scale-out alerter.
    # Type: string
    alert_name: "Kubernetes Auto Scaler Scale Out Event"
  # List of additional circuit components.
  # Type: []aperture.spec.v1.Component
  components: []
  kubernetes_object_selector:
    # Namespace.
    # Type: string
    # Required: True
    namespace: __REQUIRED_FIELD__
    # API Version.
    # Type: string
    # Required: True
    api_version: __REQUIRED_FIELD__
    # Kind.
    # Type: string
    # Required: True
    kind: __REQUIRED_FIELD__
    # Name.
    # Type: string
    # Required: True
    name: __REQUIRED_FIELD__
  # List of scale-in criteria.
  # Type: []object
  scale_in_criteria:
    - # Query.
      # Type: aperture.spec.v1.Query
      # Required: True
      query:
        # PromQL query.
        # Type: aperture.spec.v1.PromQL
        # Required: True
        promql:
          # PromQL query string.
          # Type: string
          # Required: True
          query_string: __REQUIRED_FIELD__
          # Evaluation interval.
          # Type: string
          evaluation_interval: "10s"
          # PromQL query execution output.
          # Type: aperture.spec.v1.PromQLOuts
          # Required: True
          out_ports:
            # PromQL query execution output port.
            # Type: aperture.spec.v1.OutPort
            # Required: True
            output:
              # Output Signal name.
              # Type: string
              # Required: True
              signal_name: __REQUIRED_FIELD__
      # Set point.
      # Type: number
      set_point: 0.5
      # Parameters.
      # Type: aperture.spec.v1.DecreasingGradientParameters
      parameters:
        # Slope.
        # Type: number
        slope: 1
  # List of scale-out criteria.
  # Type: []object
  scale_out_criteria:
    - # Query.
      # Type: aperture.spec.v1.Query
      # Required: True
      query:
        # PromQL query.
        # Type: aperture.spec.v1.PromQL
        # Required: True
        promql:
          # PromQL query string.
          # Type: string
          # Required: True
          query_string: __REQUIRED_FIELD__
          # Evaluation interval.
          # Type: string
          evaluation_interval: "10s"
          # PromQL query execution output.
          # Type: aperture.spec.v1.PromQLOuts
          # Required: True
          out_ports:
            # PromQL query execution output port.
            # Type: aperture.spec.v1.OutPort
            # Required: True
            output:
              # Output Signal name.
              # Type: string
              # Required: True
              signal_name: __REQUIRED_FIELD__
      # Set point.
      # Type: number
      set_point: 1
      # Parameters.
      # Type: aperture.spec.v1.IncreasingGradientParameters
      parameters:
        # Slope.
        # Type: number
        slope: -1

dashboard:
  # Refresh interval for dashboard panels.
  # Type: string
  refresh_interval: "5s"
  # From time of dashboard.
  # Type: string
  time_from: "now-15m"
  # To time of dashboard.
  # Type: string
  time_to: "now"
  datasource:
    # Datasource name.
    # Type: string
    name: "$datasource"
    # Datasource filter regex.
    # Type: string
    filter_regex: ""
